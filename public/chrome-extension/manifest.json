{
  "manifest_version": 3,
  "name": "ShopOpti+ - Dropshipping Pro",
  "version": "5.9.0",
  "description": "Extension Dropshipping Pro - Import 1-clic, IA optimisation, monitoring prix. 45+ plateformes support√©es.",
  
  "permissions": [
    "activeTab",
    "storage",
    "alarms",
    "notifications"
  ],
  
  "host_permissions": [
    "*://*.shopopti.io/*",
    "*://*.supabase.co/*"
  ],
  
  "optional_host_permissions": [
    "*://*.amazon.com/*",
    "*://*.amazon.fr/*",
    "*://*.amazon.de/*",
    "*://*.amazon.co.uk/*",
    "*://*.amazon.es/*",
    "*://*.amazon.it/*",
    "*://*.amazon.ca/*",
    "*://*.amazon.co.jp/*",
    "*://*.aliexpress.com/*",
    "*://*.aliexpress.fr/*",
    "*://*.aliexpress.us/*",
    "*://*.ebay.com/*",
    "*://*.ebay.fr/*",
    "*://*.ebay.de/*",
    "*://*.ebay.co.uk/*",
    "*://*.temu.com/*",
    "*://*.shein.com/*",
    "*://*.shein.fr/*",
    "*://*.etsy.com/*",
    "*://*.walmart.com/*",
    "*://*.wish.com/*",
    "*://*.banggood.com/*",
    "*://*.dhgate.com/*",
    "*://*.1688.com/*",
    "*://*.taobao.com/*",
    "*://*.cjdropshipping.com/*",
    "*://*.lightinthebox.com/*",
    "*://*.made-in-china.com/*",
    "*://*.cdiscount.com/*",
    "*://*.fnac.com/*",
    "*://*.rakuten.fr/*",
    "*://*.rakuten.com/*",
    "*://*.homedepot.com/*",
    "*://*.lowes.com/*",
    "*://*.costco.com/*",
    "*://*.darty.com/*",
    "*://*.boulanger.com/*",
    "*://*.manomano.fr/*",
    "*://*.leroymerlin.fr/*",
    "*://*.target.com/*",
    "*://*.bestbuy.com/*",
    "*://*.newegg.com/*",
    "*://*.overstock.com/*",
    "*://*.wayfair.com/*",
    "*://*.zalando.fr/*",
    "*://*.asos.com/*",
    "*://*.myshopify.com/*",
    "*://*.shop.tiktok.com/*",
    "*://*.tiktok.com/*"
  ],
  
  "content_scripts": [
    {
      "matches": [
        "*://*.amazon.com/*",
        "*://*.amazon.fr/*",
        "*://*.amazon.de/*",
        "*://*.amazon.co.uk/*",
        "*://*.amazon.es/*",
        "*://*.amazon.it/*",
        "*://*.amazon.ca/*",
        "*://*.amazon.co.jp/*",
        "*://*.aliexpress.com/*",
        "*://*.aliexpress.fr/*",
        "*://*.aliexpress.us/*",
        "*://*.ebay.com/*",
        "*://*.ebay.fr/*",
        "*://*.ebay.de/*",
        "*://*.ebay.co.uk/*",
        "*://*.temu.com/*",
        "*://*.shein.com/*",
        "*://*.shein.fr/*",
        "*://*.etsy.com/*",
        "*://*.walmart.com/*",
        "*://*.wish.com/*",
        "*://*.banggood.com/*",
        "*://*.dhgate.com/*",
        "*://*.cjdropshipping.com/*",
        "*://*.cdiscount.com/*",
        "*://*.fnac.com/*",
        "*://*.rakuten.fr/*",
        "*://*.rakuten.com/*",
        "*://*.homedepot.com/*",
        "*://*.lowes.com/*",
        "*://*.costco.com/*",
        "*://*.myshopify.com/*"
      ],
      "js": [
        "lib/logger.js",
        "lib/gateway-client.js",
        "lib/action-logger.js",
        "lib/deep-links.js",
        "lib/feature-flags.js",
        "lib/storage-manager.js",
        "lib/secure-dom-builder.js",
        "lib/offline-queue.js",
        "lib/encrypted-storage.js",
        "lib/security.js",
        "lib/onboarding-system.js",
        "lib/platform-detector.js",
        "lib/backend-import-client.js",
        "lib/import-response-handler.js",
        "lib/backend-first-import.js",
        "lib/unified-button-injector.js",
        "lib/feedback-system.js",
        "extractors/core-extractor.js",
        "extractors/aliexpress-extractor.js",
        "extractors/amazon-extractor.js",
        "extractors/ebay-extractor.js",
        "extractors/temu-extractor.js",
        "extractors/shein-extractor.js",
        "extractors/etsy-extractor.js",
        "extractors/walmart-extractor.js",
        "extractors/wish-extractor.js",
        "extractors/banggood-extractor.js",
        "extractors/dhgate-extractor.js",
        "extractors/cjdropshipping-extractor.js",
        "extractors/cdiscount-extractor.js",
        "extractors/fnac-extractor.js",
        "extractors/rakuten-extractor.js",
        "extractors/homedepot-extractor.js",
        "extractors/shopify-extractor.js",
        "extractors/extractor-registry.js",
        "content-script.js"
      ],
      "run_at": "document_idle"
    },
    {
      "matches": [
        "*://*.shop.tiktok.com/*",
        "*://*.tiktok.com/shop/*"
      ],
      "js": [
        "lib/logger.js",
        "lib/gateway-client.js",
        "lib/action-logger.js",
        "lib/deep-links.js",
        "lib/feature-flags.js",
        "lib/storage-manager.js",
        "lib/secure-dom-builder.js",
        "lib/offline-queue.js",
        "lib/encrypted-storage.js",
        "lib/security.js",
        "lib/onboarding-system.js",
        "lib/platform-detector.js",
        "lib/backend-import-client.js",
        "lib/import-response-handler.js",
        "lib/backend-first-import.js",
        "lib/unified-button-injector.js",
        "lib/feedback-system.js",
        "extractors/core-extractor.js",
        "extractors/tiktok-extractor.js",
        "extractors/extractor-registry.js",
        "content-script.js"
      ],
      "run_at": "document_idle"
    }
  ],
  
  "content_security_policy": {
    "extension_pages": "default-src 'self'; connect-src 'self' https://*.supabase.co https://shopopti.io https://*.shopopti.io; img-src 'self' data: https: blob:; style-src 'self' 'unsafe-inline'; font-src 'self' data:"
  },
  
  "background": {
    "service_worker": "background.js"
  },
  
  "action": {
    "default_popup": "popup.html",
    "default_title": "ShopOpti+ - Dropshipping Pro",
    "default_icon": {
      "16": "icons/icon16.png",
      "32": "icons/icon32.png",
      "48": "icons/icon48.png",
      "128": "icons/icon128.png"
    }
  },
  
  "options_page": "options.html",
  
  "icons": {
    "16": "icons/icon16.png",
    "32": "icons/icon32.png",
    "48": "icons/icon48.png",
    "128": "icons/icon128.png"
  },
  
  "web_accessible_resources": [
    {
      "resources": [
        "content.css",
        "icons/*.png"
      ],
      "matches": [
        "*://*.amazon.com/*",
        "*://*.amazon.fr/*",
        "*://*.amazon.de/*",
        "*://*.amazon.co.uk/*",
        "*://*.amazon.es/*",
        "*://*.amazon.it/*",
        "*://*.amazon.ca/*",
        "*://*.amazon.co.jp/*",
        "*://*.aliexpress.com/*",
        "*://*.aliexpress.fr/*",
        "*://*.aliexpress.us/*",
        "*://*.ebay.com/*",
        "*://*.ebay.fr/*",
        "*://*.ebay.de/*",
        "*://*.ebay.co.uk/*",
        "*://*.temu.com/*",
        "*://*.shein.com/*",
        "*://*.shein.fr/*",
        "*://*.etsy.com/*",
        "*://*.walmart.com/*",
        "*://*.wish.com/*",
        "*://*.banggood.com/*",
        "*://*.dhgate.com/*",
        "*://*.cjdropshipping.com/*",
        "*://*.cdiscount.com/*",
        "*://*.fnac.com/*",
        "*://*.rakuten.fr/*",
        "*://*.rakuten.com/*",
        "*://*.homedepot.com/*",
        "*://*.lowes.com/*",
        "*://*.costco.com/*",
        "*://*.myshopify.com/*",
        "*://*.shop.tiktok.com/*",
        "*://*.shopopti.io/*"
      ]
    }
  ]
}
