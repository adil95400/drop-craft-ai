{
  "manifest_version": 3,
  "name": "ShopOpti+ - Dropshipping Pro",
  "version": "5.6.6",
  "description": "Extension professionnelle dropshipping 100% AutoDS - Import 1-clic, Ads Spy TikTok/Facebook/Instagram, Auto-Order automatique, Sourcing multi-fournisseurs, Sync multi-boutiques, LibreTranslate, 45+ plateformes",
  
  "permissions": [
    "activeTab",
    "storage",
    "scripting",
    "alarms",
    "notifications"
  ],
  
  "host_permissions": [
    "*://*.shopopti.io/*",
    "*://*.supabase.co/*",
    "*://*.amazon.com/*",
    "*://*.amazon.fr/*",
    "*://*.amazon.de/*",
    "*://*.amazon.co.uk/*",
    "*://*.amazon.es/*",
    "*://*.amazon.it/*",
    "*://*.amazon.ca/*",
    "*://*.aliexpress.com/*",
    "*://*.aliexpress.fr/*",
    "*://*.ebay.com/*",
    "*://*.ebay.fr/*",
    "*://*.temu.com/*",
    "*://*.shein.com/*"
  ],
  
  "optional_host_permissions": [
    "*://*.amazon.co.jp/*",
    "*://*.aliexpress.us/*",
    "*://*.ebay.de/*",
    "*://*.ebay.co.uk/*",
    "*://*.walmart.com/*",
    "*://*.etsy.com/*",
    "*://*.wish.com/*",
    "*://*.shein.fr/*",
    "*://*.banggood.com/*",
    "*://*.dhgate.com/*",
    "*://*.1688.com/*",
    "*://*.taobao.com/*",
    "*://*.cjdropshipping.com/*",
    "*://*.lightinthebox.com/*",
    "*://*.made-in-china.com/*",
    "*://*.cdiscount.com/*",
    "*://*.fnac.com/*",
    "*://*.rakuten.fr/*",
    "*://*.rakuten.com/*",
    "*://*.homedepot.com/*",
    "*://*.lowes.com/*",
    "*://*.costco.com/*",
    "*://*.darty.com/*",
    "*://*.boulanger.com/*",
    "*://*.manomano.fr/*",
    "*://*.leroymerlin.fr/*",
    "*://*.target.com/*",
    "*://*.bestbuy.com/*",
    "*://*.newegg.com/*",
    "*://*.overstock.com/*",
    "*://*.wayfair.com/*",
    "*://*.zalando.fr/*",
    "*://*.asos.com/*",
    "*://*.myshopify.com/*"
  ],
  
  "content_scripts": [
    {
      "matches": [
        "*://*.amazon.com/*",
        "*://*.amazon.fr/*",
        "*://*.amazon.de/*",
        "*://*.amazon.co.uk/*",
        "*://*.amazon.es/*",
        "*://*.amazon.it/*",
        "*://*.amazon.ca/*",
        "*://*.amazon.co.jp/*",
        "*://*.aliexpress.com/*",
        "*://*.aliexpress.fr/*",
        "*://*.aliexpress.us/*",
        "*://*.ebay.com/*",
        "*://*.ebay.fr/*",
        "*://*.ebay.de/*",
        "*://*.ebay.co.uk/*",
        "*://*.temu.com/*",
        "*://*.shein.com/*",
        "*://*.shein.fr/*"
      ],
      "js": ["content-script.js"],
      "run_at": "document_idle"
    }
  ],
  
  "content_security_policy": {
    "extension_pages": "default-src 'self'; connect-src 'self' https://*.supabase.co https://shopopti.io https://*.shopopti.io; img-src 'self' data: https: blob:; style-src 'self' 'unsafe-inline'; font-src 'self' data:"
  },
  
  "background": {
    "service_worker": "background.js",
    "type": "module"
  },
  
  "action": {
    "default_popup": "popup.html",
    "default_title": "ShopOpti+ - Dropshipping Pro",
    "default_icon": {
      "16": "icons/icon16.png",
      "32": "icons/icon32.png",
      "48": "icons/icon48.png",
      "128": "icons/icon128.png"
    }
  },
  
  "options_page": "options.html",
  
  "icons": {
    "16": "icons/icon16.png",
    "32": "icons/icon32.png",
    "48": "icons/icon48.png",
    "128": "icons/icon128.png"
  },
  
  "web_accessible_resources": [
    {
      "resources": [
        "content.css",
        "content-script.js",
        "icons/*.png",
        "import-overlay-v2.js",
        "bulk-import-v5.js",
        "extractors/amazon-extractor.js",
        "extractors/aliexpress-extractor.js",
        "extractors/temu-extractor.js",
        "extractors/shein-extractor.js",
        "extractors/ebay-extractor.js",
        "extractors/core-extractor.js",
        "supplier-search.js",
        "lib/config.js",
        "lib/security.js",
        "lib/import-queue.js",
        "lib/store-manager.js",
        "lib/auth.js",
        "lib/api-client.js",
        "lib/price-rules.js",
        "lib/tag-generator.js",
        "lib/shipping-extractor.js",
        "lib/stock-extractor.js",
        "lib/csv-exporter.js",
        "lib/history-manager.js",
        "lib/pagination-handler.js",
        "lib/content-rewriter.js",
        "lib/retry-manager.js",
        "lib/auto-order-helper.js",
        "lib/tracking-sync.js",
        "lib/libretranslate-client.js"
      ],
      "matches": ["<all_urls>"]
    }
  ]
}
