<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>ShopOpti+ | Dropshipping Pro</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Animated Background -->
    <div class="bg-animation">
      <div class="bg-gradient-1"></div>
      <div class="bg-gradient-2"></div>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo-container">
          <div class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/>
              <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/>
              <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/>
              <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/>
            </svg>
          </div>
          <div class="logo-pulse"></div>
          <div class="logo-ring"></div>
        </div>
        <div class="header-info">
          <h1>ShopOpti<span class="ai">+</span></h1>
          <div class="header-meta">
            <span id="versionBadge" class="version-badge">Chargement...</span>
            <span id="planBadge" class="plan-badge">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
              <span>Free</span>
            </span>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <!-- Theme Toggle Button -->
        <button id="themeToggleBtn" class="icon-btn so-theme-toggle" title="Changer le th√®me">
          <svg class="so-theme-icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="so-theme-icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <!-- History Button -->
        <button id="historyBtn" class="icon-btn" title="Historique & Logs">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
        </button>
        <button id="notificationsBtn" class="icon-btn notification-btn" title="Notifications">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
            <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
          </svg>
          <span id="notificationBadge" class="notification-badge hidden">0</span>
        </button>
        <button id="syncBtn" class="icon-btn" title="Synchroniser avec ShopOpti">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
        <button id="settingsBtn" class="icon-btn" title="Param√®tres (boutiques, r√®gles, th√®me)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
        </button>
        <button id="dashboardBtn" class="icon-btn primary" title="Ouvrir le tableau de bord ShopOpti">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7" rx="1"/>
            <rect x="14" y="3" width="7" height="7" rx="1"/>
            <rect x="14" y="14" width="7" height="7" rx="1"/>
            <rect x="3" y="14" width="7" height="7" rx="1"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Notifications Panel -->
    <div id="notificationsPanel" class="notifications-panel hidden">
      <div class="notifications-header">
        <div class="notifications-title">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
            <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
          </svg>
          <span>Notifications</span>
          <span id="notificationCount" class="notification-count">0</span>
        </div>
        <div class="notifications-actions">
          <button id="markAllReadBtn" class="notifications-action-btn" title="Tout marquer comme lu">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 11 12 14 22 4"/>
              <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
            </svg>
          </button>
          <button id="closeNotificationsBtn" class="notifications-action-btn" title="Fermer">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="notifications-list" id="notificationsList">
        <div class="notifications-empty">
          <div class="notifications-empty-icon">üîî</div>
          <p>Aucune notification</p>
          <span>Les imports et alertes appara√Ætront ici</span>
        </div>
      </div>
      <div class="notifications-footer">
        <button id="viewAllNotificationsBtn" class="notifications-view-all">
          <span>Voir l'historique complet</span>
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/>
            <polyline points="12 5 19 12 12 19"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal hidden">
      <div class="modal-content login-modal">
        <div class="modal-header">
          <div class="login-header-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="url(#loginGradient)" stroke-width="2">
              <defs>
                <linearGradient id="loginGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#6366f1"/>
                  <stop offset="100%" style="stop-color:#a855f7"/>
                </linearGradient>
              </defs>
              <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
            </svg>
          </div>
          <h3>Connexion ShopOpti+</h3>
          <p class="login-subtitle">Connectez votre compte pour importer des produits</p>
        </div>
        <div class="modal-body">
          <form id="loginForm" class="login-form">
            <div class="form-group">
              <label for="loginToken">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px; vertical-align: middle;">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
                TOKEN D'EXTENSION
              </label>
              <div class="token-input-wrapper">
                <input 
                  type="text" 
                  id="loginToken" 
                  placeholder="Collez votre token ici (ex: ext_xxxxx...)" 
                  autocomplete="off" 
                  spellcheck="false"
                  class="token-input"
                >
                <button type="button" id="pasteTokenBtn" class="paste-btn" title="Coller depuis le presse-papier">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                  </svg>
                </button>
              </div>
              <p class="form-hint">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 16v-4M12 8h.01"/>
                </svg>
                Obtenez votre token depuis <a href="https://drop-craft-ai.lovable.app/extensions/chrome" target="_blank">ShopOpti+ Dashboard</a>
              </p>
            </div>
            <div id="loginError" class="login-error hidden">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
              </svg>
              <span></span>
            </div>
            <button type="submit" id="loginSubmitBtn" class="login-submit-btn">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
              </svg>
              <span>Valider et connecter</span>
            </button>
          </form>
          <div class="login-divider">
            <span>OU</span>
          </div>
          <button id="loginWithAppBtn" class="login-oauth-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
              <polyline points="15 3 21 3 21 9"/>
              <line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
            <span>G√©n√©rer un token sur ShopOpti+</span>
          </button>
          <p class="login-signup-link">
            Pas encore de compte ? <a href="https://drop-craft-ai.lovable.app/auth" target="_blank">Cr√©er un compte gratuit</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="status-bar disconnected">
      <div class="status-indicator">
        <span class="status-dot">
          <span class="status-dot-inner"></span>
        </span>
        <span class="status-text">Non connect√©</span>
      </div>
      <div id="syncIndicator" class="sync-indicator hidden">
        <svg class="sync-spinner" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
        </svg>
        <span id="syncStatus">Synchronis√©</span>
      </div>
      <div id="userInfo" class="user-info hidden">
        <img id="userAvatar" class="user-avatar" src="" alt="">
        <span id="userEmail" class="user-email"></span>
      </div>
      <button id="connectBtn" class="status-action">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
          <polyline points="10 17 15 12 10 7"/>
          <line x1="15" y1="12" x2="3" y2="12"/>
        </svg>
        <span>Connecter</span>
      </button>
    </div>

    <!-- Current Page Info -->
    <div id="pageInfo" class="page-info hidden">
      <div class="page-icon-wrapper">
        <span class="page-icon">üåê</span>
      </div>
      <div class="page-details">
        <span class="page-platform">-</span>
        <span class="page-url">-</span>
      </div>
      <div class="page-badge detected">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"/>
        </svg>
        <span>D√©tect√©</span>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-card" data-action="products">
        <div class="stat-icon-wrapper blue">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m7.5 4.27 9 5.15"/>
            <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
            <path d="m3.3 7 8.7 5 8.7-5"/>
            <path d="M12 22V12"/>
          </svg>
        </div>
        <div class="stat-content">
          <span id="todayProducts" class="stat-value">0</span>
          <span class="stat-label">Produits</span>
          <span class="stat-sub">aujourd'hui</span>
        </div>
        <div class="stat-trend up">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
          </svg>
        </div>
      </div>
      <div class="stat-card" data-action="reviews">
        <div class="stat-icon-wrapper purple">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        </div>
        <div class="stat-content">
          <span id="todayReviews" class="stat-value">0</span>
          <span class="stat-label">Avis</span>
          <span class="stat-sub">import√©s</span>
        </div>
        <div class="stat-trend up">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
          </svg>
        </div>
      </div>
      <div class="stat-card" data-action="monitoring">
        <div class="stat-icon-wrapper green">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
          </svg>
        </div>
        <div class="stat-content">
          <span id="monitoredCount" class="stat-value">0</span>
          <span class="stat-label">Surveill√©s</span>
          <span class="stat-sub">prix actif</span>
        </div>
        <div class="stat-trend neutral">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Main Actions - P1: UX Reduction (3 actions max visible) -->
    <section class="actions-section">
      <h3 class="section-title">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        Actions Rapides
      </h3>
      
      <!-- Primary Actions (3 max visible) -->
      <div class="actions-grid actions-primary">
        <!-- 1. Import 1-Click (Primary) -->
        <div class="action-dropdown-container">
          <button id="importPageBtn" class="action-card primary">
            <div class="action-icon-wrapper">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/>
                <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/>
              </svg>
            </div>
            <div class="action-content">
              <span class="action-title">Import 1-Click</span>
              <span class="action-desc">Produit actuel</span>
            </div>
            <div class="action-arrow dropdown-toggle" id="importDropdownToggle">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </div>
          </button>
          <div class="action-dropdown-menu hidden" id="importDropdownMenu">
            <button class="dropdown-item" id="importProductOnlyBtn">
              <span class="dropdown-icon">üì¶</span>
              <span>Import Produit seul</span>
            </button>
            <button class="dropdown-item" id="importReviewsOnlyBtn">
              <span class="dropdown-icon">‚≠ê</span>
              <span>Import Avis seuls</span>
            </button>
            <button class="dropdown-item highlight" id="importCompleteBtn">
              <span class="dropdown-icon">üöÄ</span>
              <span>Import Complet (Produit + Avis)</span>
            </button>
          </div>
        </div>
        
        <!-- 2. AI Optimize -->
        <button id="aiOptimizeBtn" class="action-card">
          <div class="action-icon-wrapper purple">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="m2 17 10 5 10-5"/>
              <path d="m2 12 10 5 10-5"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Optimiser IA</span>
            <span class="action-desc">Titre & Description</span>
          </div>
          <div class="action-arrow">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </div>
        </button>
        
        <!-- 3. Open Dashboard -->
        <button id="openDashboardBtn" class="action-card">
          <div class="action-icon-wrapper blue">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7" rx="1"/>
              <rect x="14" y="3" width="7" height="7" rx="1"/>
              <rect x="14" y="14" width="7" height="7" rx="1"/>
              <rect x="3" y="14" width="7" height="7" rx="1"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Dashboard</span>
            <span class="action-desc">Ouvrir ShopOpti</span>
          </div>
          <div class="action-arrow">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
              <polyline points="15 3 21 3 21 9"/>
              <line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
          </div>
        </button>
      </div>
      
      <!-- Advanced Actions Toggle -->
      <button id="toggleAdvancedBtn" class="toggle-advanced-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="1"/>
          <circle cx="19" cy="12" r="1"/>
          <circle cx="5" cy="12" r="1"/>
        </svg>
        <span>Actions avanc√©es</span>
        <svg class="toggle-chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"/>
        </svg>
      </button>
      
      <!-- Advanced Actions (Hidden by default) -->
      <div id="advancedActionsPanel" class="actions-grid actions-advanced hidden">
        <button id="importAllBtn" class="action-card">
          <div class="action-icon-wrapper blue">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Import Multiple</span>
            <span class="action-desc">Tous les produits</span>
          </div>
        </button>
        
        <button id="importReviewsBtn" class="action-card">
          <div class="action-icon-wrapper yellow">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Importer Avis</span>
            <span class="action-desc">Copier les reviews</span>
          </div>
        </button>
        
        <button id="priceMonitorBtn" class="action-card">
          <div class="action-icon-wrapper green">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Surveiller Prix</span>
            <span class="action-desc">Alertes temps r√©el</span>
          </div>
        </button>
        
        <button id="compareSupplierBtn" class="action-card">
          <div class="action-icon-wrapper orange">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Comparer Fournisseurs</span>
            <span class="action-desc">Trouver le meilleur prix</span>
          </div>
        </button>
        
        <button id="viewHistoryBtn" class="action-card">
          <div class="action-icon-wrapper gray">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
          <div class="action-content">
            <span class="action-title">Historique</span>
            <span class="action-desc">Voir les imports</span>
          </div>
        </button>
      </div>
    </section>

    <!-- Bulk Import Platforms Section -->
    <section class="platforms-section">
      <h3 class="section-title">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
        </svg>
        Import en Masse - Plateformes
      </h3>
      <div class="platforms-grid">
        <button class="platform-btn" data-platform="amazon" title="Amazon">
          <span class="platform-icon">üõí</span>
          <span class="platform-name">Amazon</span>
          <span class="platform-badge">100+</span>
        </button>
        <button class="platform-btn" data-platform="aliexpress" title="AliExpress">
          <span class="platform-icon">üè™</span>
          <span class="platform-name">AliExpress</span>
          <span class="platform-badge">100+</span>
        </button>
        <button class="platform-btn" data-platform="cdiscount" title="Cdiscount">
          <span class="platform-icon">üî¥</span>
          <span class="platform-name">Cdiscount</span>
          <span class="platform-badge">50+</span>
        </button>
        <button class="platform-btn" data-platform="ebay" title="eBay">
          <span class="platform-icon">üè∑Ô∏è</span>
          <span class="platform-name">eBay</span>
          <span class="platform-badge">100+</span>
        </button>
        <button class="platform-btn" data-platform="temu" title="Temu">
          <span class="platform-icon">üéØ</span>
          <span class="platform-name">Temu</span>
          <span class="platform-badge">NEW</span>
        </button>
        <button class="platform-btn" data-platform="shein" title="Shein">
          <span class="platform-icon">üëó</span>
          <span class="platform-name">Shein</span>
          <span class="platform-badge">NEW</span>
        </button>
        <button class="platform-btn" data-platform="fnac" title="Fnac">
          <span class="platform-icon">üìö</span>
          <span class="platform-name">Fnac</span>
          <span class="platform-badge">50+</span>
        </button>
        <button class="platform-btn" data-platform="shopify" title="Shopify">
          <span class="platform-icon">üõçÔ∏è</span>
          <span class="platform-name">Shopify</span>
          <span class="platform-badge">‚àû</span>
        </button>
      </div>
      <button id="showAllPlatformsBtn" class="show-all-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="1"/>
          <circle cx="19" cy="12" r="1"/>
          <circle cx="5" cy="12" r="1"/>
        </svg>
        Voir les 45+ plateformes
      </button>
    </section>

    <!-- All Platforms Modal -->
    <div id="allPlatformsModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>üåê Toutes les Plateformes</h3>
          <button class="modal-close" id="closePlatformsModal">√ó</button>
        </div>
        <div class="modal-body">
          <div class="platforms-category">
            <h4>üõí Marketplaces</h4>
            <div class="platforms-list">
              <button class="platform-item" data-platform="amazon">Amazon</button>
              <button class="platform-item" data-platform="ebay">eBay</button>
              <button class="platform-item" data-platform="cdiscount">Cdiscount</button>
              <button class="platform-item" data-platform="fnac">Fnac</button>
              <button class="platform-item" data-platform="rakuten">Rakuten</button>
              <button class="platform-item" data-platform="walmart">Walmart</button>
              <button class="platform-item" data-platform="target">Target</button>
              <button class="platform-item" data-platform="costco">Costco</button>
            </div>
          </div>
          <div class="platforms-category">
            <h4>üè™ Sourcing Chine</h4>
            <div class="platforms-list">
              <button class="platform-item" data-platform="aliexpress">AliExpress</button>
              <button class="platform-item" data-platform="alibaba">Alibaba</button>
              <button class="platform-item" data-platform="1688">1688</button>
              <button class="platform-item" data-platform="temu">Temu</button>
              <button class="platform-item" data-platform="dhgate">DHgate</button>
              <button class="platform-item" data-platform="banggood">Banggood</button>
              <button class="platform-item" data-platform="cjdropshipping">CJ Dropshipping</button>
              <button class="platform-item" data-platform="wish">Wish</button>
            </div>
          </div>
          <div class="platforms-category">
            <h4>üëó Mode & Lifestyle</h4>
            <div class="platforms-list">
              <button class="platform-item" data-platform="shein">Shein</button>
              <button class="platform-item" data-platform="zalando">Zalando</button>
              <button class="platform-item" data-platform="asos">ASOS</button>
              <button class="platform-item" data-platform="etsy">Etsy</button>
            </div>
          </div>
          <div class="platforms-category">
            <h4>üè† Maison & Bricolage</h4>
            <div class="platforms-list">
              <button class="platform-item" data-platform="manomano">ManoMano</button>
              <button class="platform-item" data-platform="leroymerlin">Leroy Merlin</button>
              <button class="platform-item" data-platform="homedepot">Home Depot</button>
              <button class="platform-item" data-platform="lowes">Lowes</button>
            </div>
          </div>
          <div class="platforms-category">
            <h4>üì± High-Tech</h4>
            <div class="platforms-list">
              <button class="platform-item" data-platform="bestbuy">Best Buy</button>
              <button class="platform-item" data-platform="newegg">Newegg</button>
              <button class="platform-item" data-platform="darty">Darty</button>
              <button class="platform-item" data-platform="boulanger">Boulanger</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs Section -->
    <section class="tabs-section">
      <div class="tabs-header">
        <button class="tab-btn active" data-tab="adsspy">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polygon points="10 8 16 12 10 16 10 8"/>
          </svg>
          Ads Spy
        </button>
        <button class="tab-btn" data-tab="sourcing">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          Sourcing
        </button>
        <button class="tab-btn" data-tab="calculator">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="4" y="2" width="16" height="20" rx="2"/>
            <line x1="8" y1="6" x2="16" y2="6"/>
          </svg>
          Profit
        </button>
        <button class="tab-btn" data-tab="sync">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6"/>
          </svg>
          Sync
        </button>
      </div>

      <!-- Ads Spy Tab (NEW - AutoDS Feature) -->
      <div class="tab-panel active" id="adsspyPanel">
        <div class="adsspy-panel">
          <div class="adsspy-header">
            <h4>üéØ D√©couvrez les Winning Ads</h4>
            <span class="adsspy-badge hot">HOT</span>
          </div>
          
          <div class="adsspy-platforms">
            <button class="adsspy-platform-btn active" data-adplatform="tiktok">
              <span class="adsspy-icon">üì±</span>
              <span>TikTok</span>
            </button>
            <button class="adsspy-platform-btn" data-adplatform="facebook">
              <span class="adsspy-icon">üìò</span>
              <span>Facebook</span>
            </button>
            <button class="adsspy-platform-btn" data-adplatform="instagram">
              <span class="adsspy-icon">üì∏</span>
              <span>Instagram</span>
            </button>
          </div>

          <div class="adsspy-search">
            <input type="text" class="form-control" placeholder="Rechercher des produits, niches..." id="adSpySearch">
            <button class="adsspy-search-btn" id="searchAdsBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
            </button>
          </div>

          <div class="adsspy-filters">
            <select class="adsspy-filter" id="adSpyCategory">
              <option value="">Toutes cat√©gories</option>
              <option value="beauty">Beaut√©</option>
              <option value="fitness">Fitness</option>
              <option value="tech">Tech</option>
              <option value="home">Maison</option>
              <option value="fashion">Mode</option>
              <option value="pets">Animaux</option>
            </select>
            <select class="adsspy-filter" id="adSpySort">
              <option value="trending">üî• Tendance</option>
              <option value="engagement">üí¨ Engagement</option>
              <option value="views">üëÅÔ∏è Vues</option>
              <option value="recent">üïê R√©cent</option>
            </select>
          </div>

          <div class="adsspy-results" id="adSpyResults">
            <div class="adsspy-card">
              <div class="adsspy-card-header">
                <div class="adsspy-card-platform">üì± TikTok</div>
                <div class="adsspy-card-stats">
                  <span class="stat">üëÅÔ∏è 2.5M</span>
                  <span class="stat">‚ù§Ô∏è 120K</span>
                </div>
              </div>
              <div class="adsspy-card-content">
                <div class="adsspy-thumbnail">
                  <div class="adsspy-thumbnail-placeholder">üé¨</div>
                  <div class="adsspy-play-btn">‚ñ∂</div>
                </div>
                <div class="adsspy-info">
                  <div class="adsspy-title">LED Sunset Lamp - Viral Product</div>
                  <div class="adsspy-metrics">
                    <span class="metric success">üìà +340% cette semaine</span>
                  </div>
                  <div class="adsspy-actions-mini">
                    <button class="adsspy-action-btn" title="Copier le lien">üîó</button>
                    <button class="adsspy-action-btn" title="Sauvegarder">üíæ</button>
                    <button class="adsspy-action-btn primary" title="Importer produit">üì¶</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="adsspy-card">
              <div class="adsspy-card-header">
                <div class="adsspy-card-platform">üìò Facebook</div>
                <div class="adsspy-card-stats">
                  <span class="stat">üëÅÔ∏è 890K</span>
                  <span class="stat">‚ù§Ô∏è 45K</span>
                </div>
              </div>
              <div class="adsspy-card-content">
                <div class="adsspy-thumbnail">
                  <div class="adsspy-thumbnail-placeholder">üé¨</div>
                  <div class="adsspy-play-btn">‚ñ∂</div>
                </div>
                <div class="adsspy-info">
                  <div class="adsspy-title">Mini Projector - Home Cinema</div>
                  <div class="adsspy-metrics">
                    <span class="metric warning">üìä Stable</span>
                  </div>
                  <div class="adsspy-actions-mini">
                    <button class="adsspy-action-btn" title="Copier le lien">üîó</button>
                    <button class="adsspy-action-btn" title="Sauvegarder">üíæ</button>
                    <button class="adsspy-action-btn primary" title="Importer produit">üì¶</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <button class="adsspy-load-more" id="loadMoreAdsBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
            Voir plus de publicit√©s
          </button>
        </div>
      </div>

      <!-- Sourcing Tab -->
      <div class="tab-panel" id="sourcingPanel">
        <div class="tab-content">
          <div class="form-group">
            <label>Rechercher des fournisseurs</label>
            <input type="text" class="form-control" placeholder="Nom du produit ou URL..." id="sourcingSearch">
          </div>
          <div class="supplier-results" id="supplierResults">
            <div class="supplier-card">
              <div class="supplier-logo">üè™</div>
              <div class="supplier-info">
                <div class="supplier-name">AliExpress</div>
                <div class="supplier-price">$8.50 - $12.00</div>
              </div>
              <div class="supplier-rating">‚≠ê 4.8</div>
            </div>
            <div class="supplier-card">
              <div class="supplier-logo">üè≠</div>
              <div class="supplier-info">
                <div class="supplier-name">1688.com</div>
                <div class="supplier-price">¬•45 (~$6.20)</div>
              </div>
              <div class="supplier-rating">‚≠ê 4.5</div>
            </div>
          </div>
          <div class="sync-actions">
            <button class="sync-btn" id="searchSuppliersBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
              Rechercher
            </button>
            <button class="sync-btn" id="comparePricesBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
              Comparer
            </button>
          </div>
        </div>
      </div>

      <!-- Calculator Tab -->
      <div class="tab-panel" id="calculatorPanel">
        <div class="profit-calculator">
          <div class="calculator-header">
            <h4>üí∞ Calculateur de Profit</h4>
          </div>
          <div class="profit-inputs">
            <div class="profit-input-group">
              <label>Co√ªt produit (‚Ç¨)</label>
              <input type="number" id="costPrice" value="10" step="0.01">
            </div>
            <div class="profit-input-group">
              <label>Prix de vente (‚Ç¨)</label>
              <input type="number" id="sellingPrice" value="29.99" step="0.01">
            </div>
            <div class="profit-input-group">
              <label>Livraison (‚Ç¨)</label>
              <input type="number" id="shippingCost" value="2" step="0.01">
            </div>
          </div>
          <div class="profit-results">
            <div class="profit-result profit">
              <div class="profit-result-icon">üíµ</div>
              <div class="profit-result-value" id="profitAmount">17.99‚Ç¨</div>
              <div class="profit-result-label">Profit Net</div>
            </div>
            <div class="profit-result margin">
              <div class="profit-result-icon">üìä</div>
              <div class="profit-result-value" id="marginPercent">60%</div>
              <div class="profit-result-label">Marge</div>
            </div>
            <div class="profit-result roi">
              <div class="profit-result-icon">üöÄ</div>
              <div class="profit-result-value" id="roiPercent">150%</div>
              <div class="profit-result-label">ROI</div>
            </div>
          </div>
          <div class="price-suggestions">
            <span class="price-label">Marge rapide:</span>
            <button class="price-btn" data-margin="30">30%</button>
            <button class="price-btn" data-margin="50">50%</button>
            <button class="price-btn active" data-margin="70">70%</button>
            <button class="price-btn" data-margin="100">100%</button>
          </div>
        </div>
      </div>

      <!-- Sync Tab -->
      <div class="tab-panel" id="syncPanel">
        <div class="sync-panel">
          <div class="sync-header">
            <h4>üîÑ Synchronisation Multi-Boutiques</h4>
          </div>
          <div class="sync-actions">
            <button class="sync-btn" id="syncStockBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m7.5 4.27 9 5.15"/>
                <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
              </svg>
              Sync Stock
            </button>
            <button class="sync-btn" id="syncPricesBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
              Sync Prix
            </button>
            <button class="sync-btn primary" id="syncAllBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21.5 2v6h-6M2.5 22v-6h6"/>
              </svg>
              Synchroniser Tout
            </button>
          </div>
          <div class="stores-list">
            <h4>Boutiques connect√©es</h4>
            <div id="connectedStoresList">
              <div class="store-item">
                <span class="store-icon">üõçÔ∏è</span>
                <span class="store-name">Ma Boutique Shopify</span>
                <span class="store-status online"></span>
              </div>
              <div class="store-item">
                <span class="store-icon">üõí</span>
                <span class="store-name">WooCommerce Store</span>
                <span class="store-status online"></span>
              </div>
            </div>
            <button class="sync-btn add-store" id="addStoreBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Ajouter une boutique
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Progress Modal -->
    <div id="importProgressModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>‚ö° Import en cours</h3>
          <button class="modal-close" id="closeProgressBtn">√ó</button>
        </div>
        <div class="progress-modal-content">
          <div class="progress-ring-container">
            <svg width="100" height="100" viewBox="0 0 100 100">
              <defs>
                <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#8b5cf6"/>
                  <stop offset="100%" style="stop-color:#06b6d4"/>
                </linearGradient>
              </defs>
              <circle class="progress-ring-bg" cx="50" cy="50" r="38"/>
              <circle class="progress-ring" id="importProgressRing" cx="50" cy="50" r="38"/>
            </svg>
            <div class="progress-percentage" id="progressPercentage">0%</div>
          </div>
          
          <div class="progress-product-name" id="progressProductName">Chargement...</div>
          
          <div class="progress-bar-container">
            <div class="progress-bar" id="importProgressBar" style="width: 0%"></div>
          </div>
          
          <div class="progress-steps">
            <div class="progress-step" id="productProgress">
              <span class="progress-step-icon">üì¶</span>
              <span class="progress-step-label">Produit</span>
              <span class="progress-status waiting">waiting</span>
            </div>
            <div class="progress-step" id="variantsProgress">
              <span class="progress-step-icon">üé®</span>
              <span class="progress-step-label">Variantes</span>
              <span class="progress-status waiting">waiting</span>
            </div>
            <div class="progress-step" id="imagesProgress">
              <span class="progress-step-icon">üñºÔ∏è</span>
              <span class="progress-step-label">Images</span>
              <span class="progress-status waiting">waiting</span>
            </div>
            <div class="progress-step" id="reviewsProgress">
              <span class="progress-step-icon">‚≠ê</span>
              <span class="progress-step-label">Avis</span>
              <span class="progress-status waiting">waiting</span>
            </div>
          </div>
          
          <div class="progress-actions">
            <button class="btn-secondary" id="cancelImportBtn">Annuler</button>
            <button class="btn-primary hidden" id="viewProductBtn">Voir le produit</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="popup-footer">
      <div class="footer-left">
        <span id="lastSyncTime" style="font-size: 11px; color: var(--text-muted);">Derni√®re sync: -</span>
      </div>
      <button class="footer-btn" id="sendToAppBtn">
        Ouvrir Dashboard
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-left: 4px;">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
          <polyline points="15 3 21 3 21 9"/>
          <line x1="10" y1="14" x2="21" y2="3"/>
        </svg>
      </button>
    </footer>
  </div>

  <!-- UI Enhancement Libraries -->
  <script src="lib/theme-manager.js"></script>
  <script src="lib/history-panel.js"></script>
  <script src="lib/performance-mode.js"></script>
  <script src="lib/ui-enhancements.js"></script>
  <script src="popup.js"></script>
</body>
</html>
