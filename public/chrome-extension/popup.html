<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>ShopOpti+ | Dropshipping Pro</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo-container">
          <span class="logo">ğŸ›ï¸</span>
          <div class="logo-pulse"></div>
        </div>
        <div class="header-info">
          <h1>ShopOpti<span class="plus">+</span></h1>
          <div class="header-meta">
            <span class="version-badge">PRO v3.0</span>
            <span id="planBadge" class="plan-badge">Free</span>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <button id="syncBtn" class="icon-btn" title="Synchroniser">
          <span class="icon">ğŸ”„</span>
        </button>
        <button id="settingsBtn" class="icon-btn" title="ParamÃ¨tres">
          <span class="icon">âš™ï¸</span>
        </button>
        <button id="dashboardBtn" class="icon-btn primary" title="Dashboard">
          <span class="icon">ğŸ“Š</span>
        </button>
      </div>
    </header>

    <!-- Connection Status -->
    <div id="connectionStatus" class="status-bar disconnected">
      <div class="status-indicator">
        <span class="status-dot"></span>
        <span class="status-text">Non connectÃ©</span>
      </div>
      <button id="connectBtn" class="status-action">Connecter</button>
    </div>

    <!-- Current Page Info -->
    <div id="pageInfo" class="page-info hidden">
      <div class="page-icon">ğŸŒ</div>
      <div class="page-details">
        <span class="page-platform">-</span>
        <span class="page-url">-</span>
      </div>
      <div class="page-badge detected">
        <span>âœ“ DÃ©tectÃ©</span>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-card" data-action="products">
        <div class="stat-icon-wrapper blue">
          <span>ğŸ“¦</span>
        </div>
        <div class="stat-content">
          <span id="todayProducts" class="stat-value">0</span>
          <span class="stat-label">Produits</span>
          <span class="stat-sub">aujourd'hui</span>
        </div>
      </div>
      <div class="stat-card" data-action="reviews">
        <div class="stat-icon-wrapper purple">
          <span>â­</span>
        </div>
        <div class="stat-content">
          <span id="todayReviews" class="stat-value">0</span>
          <span class="stat-label">Avis</span>
          <span class="stat-sub">importÃ©s</span>
        </div>
      </div>
      <div class="stat-card" data-action="monitoring">
        <div class="stat-icon-wrapper green">
          <span>ğŸ“ˆ</span>
        </div>
        <div class="stat-content">
          <span id="monitoredCount" class="stat-value">0</span>
          <span class="stat-label">SurveillÃ©s</span>
          <span class="stat-sub">prix actif</span>
        </div>
      </div>
    </div>

    <!-- Main Actions -->
    <section class="actions-section">
      <h3 class="section-title">Actions Rapides</h3>
      <div class="actions-grid">
        <button id="importPageBtn" class="action-card primary">
          <div class="action-icon">ğŸš€</div>
          <div class="action-content">
            <span class="action-title">Import 1-Click</span>
            <span class="action-desc">Importer cette page</span>
          </div>
          <div class="action-arrow">â†’</div>
        </button>
        
        <button id="importAllBtn" class="action-card">
          <div class="action-icon">ğŸ“¥</div>
          <div class="action-content">
            <span class="action-title">Import Multiple</span>
            <span class="action-desc">Tous les produits</span>
          </div>
          <div class="action-arrow">â†’</div>
        </button>
        
        <button id="importReviewsBtn" class="action-card">
          <div class="action-icon">â­</div>
          <div class="action-content">
            <span class="action-title">Importer Avis</span>
            <span class="action-desc">Copier les reviews</span>
          </div>
          <div class="action-arrow">â†’</div>
        </button>
        
        <button id="priceMonitorBtn" class="action-card">
          <div class="action-icon">ğŸ“Š</div>
          <div class="action-content">
            <span class="action-title">Surveiller Prix</span>
            <span class="action-desc">Alertes en temps rÃ©el</span>
          </div>
          <div class="action-arrow">â†’</div>
        </button>
      </div>
    </section>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="main">ğŸ  Accueil</button>
      <button class="tab-btn" data-tab="profit">ğŸ’° Profit</button>
      <button class="tab-btn" data-tab="variants">ğŸ”„ Variantes</button>
      <button class="tab-btn" data-tab="sync">ğŸ”— Sync</button>
    </nav>

    <!-- Profit Calculator Tab -->
    <section id="profitTab" class="tab-panel hidden">
      <div class="tab-header">
        <h3>ğŸ’° Calculateur de Profit</h3>
      </div>
      
      <div class="calc-container">
        <div class="calc-section">
          <h4>CoÃ»ts</h4>
          <div class="calc-row">
            <label>Prix d'achat (â‚¬)</label>
            <input type="number" id="costPrice" value="0" step="0.01" min="0" />
          </div>
          <div class="calc-row">
            <label>Livraison (â‚¬)</label>
            <input type="number" id="shippingCost" value="0" step="0.01" min="0" />
          </div>
          <div class="calc-row">
            <label>Frais marketplace (â‚¬)</label>
            <input type="number" id="marketplaceFees" value="0" step="0.01" min="0" />
          </div>
          <div class="calc-row">
            <label>Frais transaction (%)</label>
            <input type="number" id="transactionFee" value="2.9" step="0.1" min="0" />
          </div>
        </div>
        
        <div class="calc-section">
          <h4>Prix de vente</h4>
          <div class="calc-row">
            <label>Prix de vente (â‚¬)</label>
            <input type="number" id="sellingPrice" value="0" step="0.01" min="0" />
          </div>
          <div class="calc-row">
            <label>QuantitÃ© estimÃ©e</label>
            <input type="number" id="estimatedQty" value="100" step="1" min="1" />
          </div>
        </div>
        
        <div class="profit-results">
          <div class="profit-card">
            <span class="profit-label">Profit/unitÃ©</span>
            <span id="profitPerUnit" class="profit-value">0.00 â‚¬</span>
          </div>
          <div class="profit-card">
            <span class="profit-label">Marge</span>
            <span id="marginPercent" class="profit-value">0%</span>
          </div>
          <div class="profit-card">
            <span class="profit-label">ROI</span>
            <span id="roiPercent" class="profit-value">0%</span>
          </div>
          <div class="profit-card highlight">
            <span class="profit-label">Profit total</span>
            <span id="totalProfit" class="profit-value">0.00 â‚¬</span>
          </div>
        </div>
        
        <div class="recommendations-box" id="profitRecommendations"></div>
        
        <div class="suggested-prices">
          <span class="suggested-label">Prix suggÃ©rÃ©s:</span>
          <div class="price-btns">
            <button class="price-btn" data-margin="20">+20%</button>
            <button class="price-btn" data-margin="30">+30%</button>
            <button class="price-btn" data-margin="50">+50%</button>
            <button class="price-btn" data-margin="100">x2</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Variant Mapping Tab -->
    <section id="variantsTab" class="tab-panel hidden">
      <div class="tab-header">
        <h3>ğŸ”„ Mapping Variantes</h3>
      </div>
      
      <div class="mapping-container">
        <div class="mapping-templates">
          <h4>Templates prÃ©dÃ©finis</h4>
          <div class="template-grid">
            <button class="template-btn" data-template="sizes-eu">ğŸ“ Tailles EU</button>
            <button class="template-btn" data-template="sizes-us">ğŸ“ Tailles US</button>
            <button class="template-btn" data-template="colors-fr">ğŸ¨ Couleurs FR</button>
            <button class="template-btn" data-template="colors-en">ğŸ¨ Colors EN</button>
          </div>
        </div>
        
        <div class="mapping-type">
          <button class="type-btn active" data-type="size">Tailles</button>
          <button class="type-btn" data-type="color">Couleurs</button>
          <button class="type-btn" data-type="custom">Custom</button>
        </div>
        
        <div id="mappingRules" class="mapping-rules">
          <div class="mapping-rule">
            <input type="text" placeholder="Source (ex: XL)" class="source-input" />
            <span class="arrow">â†’</span>
            <input type="text" placeholder="Cible (ex: Extra Large)" class="target-input" />
            <button class="remove-btn">Ã—</button>
          </div>
        </div>
        
        <button id="addRuleBtn" class="add-rule-btn">+ Ajouter rÃ¨gle</button>
        
        <div class="mapping-actions">
          <button id="saveMappingBtn" class="action-btn primary">ğŸ’¾ Sauvegarder</button>
          <button id="autoMapBtn" class="action-btn ai">ğŸ¤– IA Mapping</button>
        </div>
        
        <div class="saved-mappings">
          <h4>Mappings sauvegardÃ©s</h4>
          <div id="savedMappingsList" class="mappings-list">
            <span class="empty-msg">Aucun mapping</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Store Sync Tab -->
    <section id="syncTab" class="tab-panel hidden">
      <div class="tab-header">
        <h3>ğŸ”— Synchronisation Boutiques</h3>
      </div>
      
      <div class="sync-container">
        <div class="stores-section">
          <h4>Boutiques connectÃ©es</h4>
          <div id="storesList" class="stores-list">
            <span class="loading-msg">Chargement...</span>
          </div>
          <button id="addStoreBtn" class="add-store-btn">+ Connecter boutique</button>
        </div>
        
        <div class="sync-options">
          <h4>Options de synchronisation</h4>
          <label class="sync-toggle">
            <input type="checkbox" id="syncStock" checked />
            <span class="toggle-switch"></span>
            Sync automatique du stock
          </label>
          <label class="sync-toggle">
            <input type="checkbox" id="syncPrices" checked />
            <span class="toggle-switch"></span>
            Sync automatique des prix
          </label>
          <label class="sync-toggle">
            <input type="checkbox" id="syncOrders" />
            <span class="toggle-switch"></span>
            Sync des commandes
          </label>
          <label class="sync-toggle">
            <input type="checkbox" id="autoOrderEnabled" />
            <span class="toggle-switch"></span>
            Auto-commande fournisseur
          </label>
        </div>
        
        <div class="sync-actions">
          <button id="syncAllBtn" class="sync-btn primary">ğŸ”„ Tout synchroniser</button>
          <button id="syncStockBtn" class="sync-btn">ğŸ“¦ Sync Stock</button>
          <button id="syncPricesBtn" class="sync-btn">ğŸ’µ Sync Prix</button>
        </div>
        
        <div class="sync-status">
          <h4>Statut</h4>
          <div class="status-row"><span>DerniÃ¨re sync:</span><span id="lastSyncTime">Jamais</span></div>
          <div class="status-row"><span>Produits synchronisÃ©s:</span><span id="syncedCount">0</span></div>
          <div class="status-row"><span>Erreurs:</span><span id="syncErrors">0</span></div>
        </div>
        
        <div class="push-section">
          <h4>ğŸ“¤ Envoyer vers boutique</h4>
          <select id="targetStore" class="store-select">
            <option value="">SÃ©lectionner une boutique</option>
          </select>
          <div class="push-options">
            <label><input type="checkbox" id="pushImages" checked /> Images</label>
            <label><input type="checkbox" id="pushVariants" checked /> Variantes</label>
            <label><input type="checkbox" id="pushAsDraft" /> Brouillon</label>
          </div>
          <button id="pushProductBtn" class="push-btn">Envoyer le produit actuel</button>
        </div>
      </div>
    </section>

    <!-- Advanced Features -->
    <section class="features-section">
      <h3 class="section-title">Outils AvancÃ©s</h3>
      <div class="features-grid">
        <button id="autoOrderBtn" class="feature-btn">
          <span class="feature-icon">ğŸ¤–</span>
          <span>Auto-Order</span>
        </button>
        <button id="competitorBtn" class="feature-btn">
          <span class="feature-icon">ğŸ”</span>
          <span>Spy CompÃ©t.</span>
        </button>
        <button id="bulkImportBtn" class="feature-btn">
          <span class="feature-icon">ğŸ“‹</span>
          <span>Import CSV</span>
        </button>
        <button id="aiOptimizeBtn" class="feature-btn premium">
          <span class="feature-icon">âœ¨</span>
          <span>IA Optimize</span>
          <span class="premium-badge">PRO</span>
        </button>
      </div>
    </section>

    <!-- Recent Activity -->
    <section class="activity-section">
      <div class="section-header">
        <h3 class="section-title">ActivitÃ© RÃ©cente</h3>
        <button id="clearActivityBtn" class="text-btn">Effacer</button>
      </div>
      <div id="activityList" class="activity-list">
        <div class="empty-state">
          <span class="empty-icon">ğŸ“­</span>
          <span class="empty-text">Aucune activitÃ© rÃ©cente</span>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <button id="sendToAppBtn" class="primary-btn">
        <span class="btn-icon">ğŸ“¤</span>
        <span>Envoyer Ã  ShopOpti+</span>
        <span id="pendingCount" class="pending-badge hidden">0</span>
      </button>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay hidden">
    <div class="loader-content">
      <div class="loader-spinner"></div>
      <span id="loadingText" class="loader-text">Chargement...</span>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="popup.js"></script>
</body>
</html>
